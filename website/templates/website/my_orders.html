{% extends 'website/account.html' %}
{% load static %}
{% block side_content %}

<div>
    {% if order_items %}
        <h6 class="fw-bold text-center">My Orders</h6>
        <hr>
        <div class="container">
            <div class="row fs-6 fw-bold disabled">
                <div class="col-md-6">Product Info</div>
                <div class="col-md-2">Order Amount</div>
                <div class="col-md-2">Order Status</div>
                <div class="col-md-2">Actions</div>   
            </div>
                {% for order in orders %}
                    <div class="row border-bottom-0 border">
                        <div class="col-md-6 ">
                            Order No. {{ order.id }}
                        </div>
                        <div class="col-md-6 ">
                            order date : {{ order.order_date }}
                        </div>
                    </div>
                    
                    {% for order_item in order_items %}
                    {% if order_item.order_id == order.id %}
                    <div class="row border mb-2">
                        <div class="col-1 mt-1">
                            <img src="{{ order_item.product.image.url }}" class="card-img-top" alt="..." style="height: 100%; width: 100%; object-fit: cover;">
                        </div>
                        <div class="col-5 mt-1">
                            <div class="row">
                                <div class="col-6">{{ order_item.product.name }}</div>
                                <div class="col-6">{{ order_item.product.description }}</div>
                            </div>
                        </div>
                        <div class="col-2 mt-1">{{ order_item.get_total_price }}</div>
                        <div class="col-2 mt-1">{{ order.status }}</div>
                        <div class="col-2 mt-1">
                            <a href=""><div class="btn btn-success btn-sm">Track order</div></a>
                        </div>
                    </div>
                    {% endif %}
                    {% endfor %}
                {% endfor %}

            </div>
    
    {% else %}
    <div class="row">
        <div class="col-12 d-flex flex-row justify-content-center">
            <h2 class="text-dark">Ooops, You have no orders</h2>     
       </div> 
       <div class="col-12 h-50 d-flex flex-row justify-content-center">
        <img src="{% static 'images/no_order.jpeg' %}" class="d-block w-50 c-img" alt="...">
       </div>    
       <div class="col-md-12 d-flex flex-row justify-content-start">
        <a href="/" class="nav-link text-dark lead">Continue shopping</a>
     </div> 
    </div>
    {% endif %}
</div>

<script>
    function showContent(contentId) {
        // Hide all content sections
        const sections = document.querySelectorAll('.content-section');
        sections.forEach(section => {
            section.style.display = 'none';
        });
        
        // Show the selected content section
        const selectedSection = document.getElementById(contentId);
        if (selectedSection) {
            selectedSection.style.display = 'block';
        }

        // Update active link
        const links = document.querySelectorAll('.nav-link');
        links.forEach(link => {
            link.classList.remove('active');
        });
        document.querySelector(`[onclick="showContent('${contentId}')"]`).classList.add('active');
    }
</script>
{% endblock %}